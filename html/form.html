<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../css/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" href="../css/sty.css"/>
    <script src="../js/jquery-1.11.1.min.js"></script>
    <script src="../js/jquery.mobile-1.4.5.min.js"></script>
    <title>良药宝典</title>
</head>
<body>
<div data-role="page" id="index">
    <div data-role="header">
        <a href="index2.html" class="ui-btn ui-icon-carat-l ui-btn-icon-notext"></a>
        <div class="ui-btn-1m">
            <h1 class="head-title">个人信息填写</h1>
        </div>
    </div>

    <div data-role="main" class="form">
        <form action="" >
            <p>为保证服务质量，请如实填写每一项信息</p>
            <div class="form-group">
                <label><span class="red">&nbsp;*&nbsp;</span>姓名：</label>
                <input id="name" type="text">
            </div>
            <div class="form-group">
                <label><span class="red">&nbsp;*&nbsp;</span>联系电话：</label>
                <input id="phone" type="text">
            </div>
            <div class="form-group">
                <label><span class="red">&nbsp;*&nbsp;</span>身份证号：</label>
                <input id="identity" type="text">
            </div>
            <div class="form-group">
                <label class="label-textarea"><span class="red">&nbsp;*&nbsp;</span>现居通信地址：</label>
                <textarea id="address"></textarea>
            </div>
        </form>
        <hr>

        <form id="userInfo">
            <div class="info">
                <p>被检测人信息</p>
                <label>姓名：</label>
                <input type="text" name="fullname" >

                <label>性别：</label>
                <input type="text" name="fullname" >

                <label><span class="red">&nbsp;*&nbsp;</span>是否有身份证：</label>
                <select name="idCard">
                    <option value="#">请选择</option>
                    <option value="yes">是</option>
                    <option value="no">否</option>
                </select>

                <label><span class="red">&nbsp;*&nbsp;</span>样本信息：</label>
                <select name="info">
                    <option value="#">请选择</option>
                    <option value="kqlm">口腔黏膜</option>
                    <option value="qdx">脐带血</option>
                </select>
            </div>


        </form>

        <button class="btn btn-md btn-purple ml-20" id="addUserInfo" type="button">添加检测人</button><hr>

        <form id="daima">
            <div class="info">
                <label><span class="red">&nbsp;*&nbsp;</span>顾问代码：</label>
                <input type="text" name="daima" >
            </div>

        </form>
        <div class="ui-btn-2m">
            <input type="checkbox" id="agree"/>我已阅读并同意<a href="zhiqingshu.html">《知情同意书》</a>
        </div>
    </div>

    <script>
        function isChinaName(name) {
            var pattern = /^[\u4E00-\u9FA5]{1,6}$/;
            return pattern.test(name);
        }

        // 验证手机号
        function isPhoneNo(phone) {
            var pattern = /^1[34578]\d{9}$/;
            return pattern.test(phone);
        }

        // 验证身份证
        function isCardNo(card) {
            var pattern = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
            return pattern.test(card);
        }

        // 验证函数
        function formValidate() {
            var str = '';

            // 判断名称
            if($.trim($('#name').val()).length == 0) {
                str += '名称没有输入\n';
                $('#name').focus();
            } else {
                if(isChinaName($.trim($('#name').val())) == false) {
                    str += '名称不合法\n';
                    $('#name').focus();
                }
            }

            // 判断手机号码
            if ($.trim($('#phone').val()).length == 0) {
                str += '手机号没有输入\n';
                $('#phone').focus();
            } else {
                if(isPhoneNo($.trim($('#phone').val()) == false)) {
                    str += '手机号码不正确\n';
                    $('#phone').focus();
                }
            }

            // 验证身份证
            if($.trim($('#identity').val()).length == 0) {
                str += '身份证号码没有输入\n';
                $('#identity').focus();
            } else {
                if(isCardNo($.trim($('#identity').val())) == false) {
                    str += '身份证号不正确；\n';
                    $('#identity').focus();
                }
            }

            // 验证地址
            if($.trim($('#address').val()).length == 0) {
                str += '地址没有输入\n';
                $('#address').focus();
            }

            // 如果没有错误则提交
            if(str != '') {
                alert(str);
                return false;
            } else {
                $('.auth-form').submit();
            }
        }

        $('#submit').on('click', function() {
            formValidate();
        });

    </script>


    <div data-role="main" class="ui-content">

    </div>

    <div data-role="footer" data-position="fixed">
        <div data-role="footer" data-position="fixed">
            <span class="meal-price"></span>
            <span class="next-btn">提交订单</span>
        </div>

    </div>

</div>
<script src="../js/index.js"></script>
</body>

</html>
